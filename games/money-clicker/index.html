<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Money Tycoon - ìºë¦­í„° í‚¤ìš°ê¸°</title>
    <link href="https://fonts.googleapis.com/css2?family=Black+Han+Sans&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root { --primary: #00ff9d; --bg: #111; --panel: #1e1e1e; }
        body { margin:0; background:var(--bg); color:white; font-family:'Noto Sans KR'; overflow:hidden; user-select:none; }
        
        /* ë ˆì´ì•„ì›ƒ */
        .game-container { display:flex; height:100vh; height:100dvh; /* ëª¨ë°”ì¼ ë¸Œë¼ìš°ì € ë†’ì´ ëŒ€ì‘ */ }
        
        /* ì™¼ìª½: í”Œë ˆì´ ì˜ì—­ */
        .play-area { 
            flex:1; 
            display:flex; flex-direction:column; align-items:center; justify-content:center; 
            position:relative; 
            background: radial-gradient(circle, #333 0%, #000 100%);
            /* [ì¤‘ìš”] ëª¨ë°”ì¼ì—ì„œ ë‚´ìš©ì´ ë„˜ì¹˜ë©´ ìŠ¤í¬ë¡¤ ê°€ëŠ¥í•˜ê²Œ ë³€ê²½ */
            overflow-y: auto; 
            padding: 20px 0;
        }
        
        .stats-box { text-align:center; margin-bottom:20px; z-index:10; margin-top: auto; /* ìœ„ìª½ ì—¬ë°± ìë™ */ }
        .money { font-family:'Black Han Sans'; font-size:2.5rem; color:var(--primary); text-shadow:0 0 10px rgba(0,255,157,0.3); }
        .cps { color:#aaa; font-size:0.9rem; }

        /* ìºë¦­í„° (í´ë¦­ ë²„íŠ¼) */
        .character-btn {
            width: 250px; height: 250px;
            cursor: pointer; transition: 0.1s;
            position: relative; z-index: 5;
            margin-bottom: auto; /* ì•„ë˜ìª½ ì—¬ë°± ìë™ */
        }
        .character-btn img { width: 100%; height: 100%; object-fit: contain; filter: drop-shadow(0 0 10px rgba(255,255,255,0.2)); }
        .character-btn:active { transform: scale(0.95); }

        /* [ìˆ˜ì •ë¨] ê´‘ê³  ë°°ë„ˆ (ê²¹ì¹¨ í•´ê²°) */
        .ad-banner-area {
            position: relative; /* ê³ ì • ìœ„ì¹˜ í•´ì œ */
            width: 320px; height: 100px;
            margin-top: 20px; /* ë²„íŠ¼ê³¼ ê°„ê²© */
            margin-bottom: 10px; /* ë°”ë‹¥ê³¼ ê°„ê²© */
            flex-shrink: 0; /* í™”ë©´ ì‘ì•„ì ¸ë„ ì°Œê·¸ëŸ¬ì§ ë°©ì§€ */
            display: flex; align-items: center; justify-content: center;
            background: rgba(0,0,0,0.3); border-radius: 10px;
        }

        /* ì˜¤ë¥¸ìª½: ìƒì  */
        .shop-area { width: 350px; background: var(--panel); border-left: 1px solid #333; display: flex; flex-direction: column; }
        .shop-header { padding: 15px; font-family: 'Black Han Sans'; text-align: center; background: #252525; font-size: 1.2rem; }
        .shop-list { flex: 1; overflow-y: auto; padding: 10px; }

        /* ì•„ì´í…œ ìŠ¤íƒ€ì¼ */
        .item { display: flex; align-items: center; background: #2c2c2c; padding: 10px; margin-bottom: 8px; border-radius: 8px; cursor: pointer; border: 2px solid transparent; }
        .item:hover { background: #353535; }
        .item.can-buy { border-color: var(--primary); }
        
        .item-img { width: 40px; height: 40px; margin-right: 10px; background: #000; border-radius: 5px; overflow: hidden; }
        .item-img img { width: 100%; height: 100%; object-fit: cover; }
        
        .item-info { flex: 1; }
        .item-name { font-weight: bold; font-size: 0.9rem; }
        .item-cost { color: var(--primary); font-size: 0.9rem; }
        .item-count { background: #555; padding: 2px 6px; border-radius: 4px; font-size: 0.7rem; margin-left: auto; }

        /* í´ë¦­ ì´í™íŠ¸ */
        .float-num { position: absolute; color: white; font-weight: bold; font-size: 1.2rem; pointer-events: none; animation: floatUp 0.8s forwards; }
        @keyframes floatUp { 0% { transform: translateY(0); opacity: 1; } 100% { transform: translateY(-50px); opacity: 0; } }

        @media (max-width: 768px) {
            .game-container { flex-direction: column; }
            .shop-area { width: 100%; height: 40%; flex-shrink: 0; } /* ìƒì  ë†’ì´ ê³ ì • */
            .character-btn { width: 180px; height: 180px; } /* ëª¨ë°”ì¼ì—ì„œ ìºë¦­í„° í¬ê¸° ì¡°ì ˆ */
        }
    </style>
</head>
<body>

    <div class="game-container">
        <div class="play-area">
            <div class="stats-box">
                <div class="money" id="moneyDisplay">0ì›</div>
                <div class="cps" id="cpsDisplay">ì´ˆë‹¹ 0ì› ìˆ˜ìµ ì¤‘</div>
            </div>

            <div class="character-btn" id="clickTarget">
                <img id="charImg" src="https://cdn-icons-png.flaticon.com/512/616/616408.png" alt="Character">
            </div>

            <div class="ad-banner-area" id="ad-game-bottom"></div>
        </div>

        <div class="shop-area">
            <div class="shop-header">ğŸ›’ ì—…ê·¸ë ˆì´ë“œ ìƒì </div>
            <div class="shop-list" id="shopList"></div>
        </div>
    </div>

    <script src="../../js/ads.js"></script>

    <script>
        // ê²Œì„ ë°ì´í„°
        let game = {
            money: 0,
            mps: 0, 
            clickPower: 1,
            items: [
                { name: "íŠ¸ë„ë„ë¼ ëŒ„ìŠ¤", cost: 50, value: 5, count: 0, url: "https://cdn-icons-png.flaticon.com/512/3083/3083393.png" },
                { name: "ìœ íŠœë²„ ë°©ì†¡ì¥ë¹„", cost: 500, value: 30, count: 0, url: "https://cdn-icons-png.flaticon.com/512/3163/3163478.png" },
                { name: "êµ¬ë…ì 10ë§Œëª…", cost: 2000, value: 100, count: 0, url: "https://cdn-icons-png.flaticon.com/512/4406/4406256.png" },
                { name: "AI ìºë¦­í„° ê°œë°œ", cost: 10000, value: 500, count: 0, url: "https://cdn-icons-png.flaticon.com/512/2040/2040946.png" },
                { name: "ê¸€ë¡œë²Œ ì„œë²„ ì¦ì„¤", cost: 50000, value: 2500, count: 0, url: "https://cdn-icons-png.flaticon.com/512/2504/2504789.png" }
            ]
        };

        // ì €ì¥ ë¶ˆëŸ¬ì˜¤ê¸°
        if(localStorage.getItem('moneyV2')) {
            const saved = JSON.parse(localStorage.getItem('moneyV2'));
            game.money = saved.money || 0;
            if(saved.items) {
                saved.items.forEach((savedItem, i) => {
                    if(game.items[i]) game.items[i].count = savedItem.count;
                });
            }
        }

        const ui = {
            money: document.getElementById('moneyDisplay'),
            cps: document.getElementById('cpsDisplay'),
            shop: document.getElementById('shopList'),
            charImg: document.getElementById('charImg')
        };

        function calcMPS() {
            let total = 0;
            game.items.forEach(item => total += (item.value * item.count));
            game.mps = total;
            // ëˆ ë§ì´ ë²Œë©´ ìºë¦­í„° ë³€ê²½ (ì˜ˆì‹œ)
            if(game.mps > 1000) ui.charImg.src = "https://cdn-icons-png.flaticon.com/512/4712/4712109.png"; 
        }

        function updateUI() {
            ui.money.innerText = Math.floor(game.money).toLocaleString() + "ì›";
            ui.cps.innerText = "ì´ˆë‹¹ " + game.mps.toLocaleString() + "ì› ìˆ˜ìµ ì¤‘";
            renderShop();
        }

        function renderShop() {
            ui.shop.innerHTML = "";
            game.items.forEach((item, idx) => {
                const el = document.createElement('div');
                el.className = "item" + (game.money >= item.cost ? " can-buy" : "");
                el.innerHTML = `
                    <div class="item-img"><img src="${item.url}"></div>
                    <div class="item-info">
                        <div class="item-name">${item.name}</div>
                        <div class="item-cost">${item.cost.toLocaleString()}ì›</div>
                    </div>
                    <div class="item-count">x${item.count}</div>
                `;
                el.onclick = () => buyItem(idx);
                ui.shop.appendChild(el);
            });
        }

        function buyItem(idx) {
            const item = game.items[idx];
            if(game.money >= item.cost) {
                game.money -= item.cost;
                item.count++;
                item.cost = Math.floor(item.cost * 1.5);
                calcMPS();
                save();
                updateUI();
            }
        }

        function save() {
            localStorage.setItem('moneyV2', JSON.stringify(game));
        }

        document.getElementById('clickTarget').addEventListener('mousedown', (e) => {
            handleInput(e.clientX, e.clientY);
        });
        
        // ëª¨ë°”ì¼ í„°ì¹˜ ëŒ€ì‘
        document.getElementById('clickTarget').addEventListener('touchstart', (e) => {
            e.preventDefault(); // ë”ë¸”íƒ­ í™•ëŒ€ ë°©ì§€
            handleInput(e.touches[0].clientX, e.touches[0].clientY);
        }, {passive: false});

        function handleInput(x, y) {
            game.money += game.clickPower + (game.mps * 0.01);
            updateUI();
            
            const float = document.createElement('div');
            float.className = 'float-num';
            float.innerText = "+" + Math.floor(game.clickPower + (game.mps * 0.01));
            float.style.left = x + 'px';
            float.style.top = y + 'px';
            document.body.appendChild(float);
            setTimeout(() => float.remove(), 800);
        }

        setInterval(() => {
            if(game.mps > 0) {
                game.money += (game.mps / 10);
                updateUI();
                save();
            }
        }, 100);

        calcMPS();
        updateUI();
    </script>
</body>
</html>
